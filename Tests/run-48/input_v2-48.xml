<?xml version="1.0" encoding="UTF-8"?>
<pyreefcore xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<!-- Simulation time structure -->
	<time>
		<!-- Simulation start time [a] -->
		<start>0.</start>
		<!-- Simulation end time [a] -->
		<end>8900.</end>
		<!-- Time step for carbonate module [a] -->
		<tcarb>10.</tcarb>
		<!-- Display interval [a] -->
		<display>100.</display>
		<!-- Stratigraphic layer interval [a] -->
		<laytime>100.</laytime>
	</time>

	<!-- Species definition, initial population and position. -->
	<habitats>
		<!-- Initial depth relative to sea-level at start time [m].
             Note: positive when below sea-level. -->
		<depth>2.</depth>
		<!-- Number of species to define. -->
		<speciesNb>3</speciesNb>
		<!-- Maximum population number. -->
		<maxPopulation>20</maxPopulation>
		<!-- Species definition -->
		<species>
			<!-- Species name needs to be lower than 10 characters -->
			<!-- Species Definition -->
			<!-- Shallow assemblage -->
			<name>1-sh-klc</name>
			<!-- Definition of intrinsic rate of increase/decrease of the
                 considered population of species (Malthusian parameter). -->
			<malthus>0.002</malthus>
			<!-- Initial population number for considered species. -->
			<population>0.</population>
			<!-- Species maximum production rate for considered species [m/y]. -->
			<production>0.010</production>
		</species>

		<!-- Species definition -->
		<!-- Medium assemblage (6-20 m), similar to tabular/branching coral facies of Indo-Pacific. Represents growth at beginning of 'catch-up' reef -->
		<species>
			<!-- Species name needs to be lower than 10 characters -->
			<name>3a-dp-c</name>
			<!-- Definition of intrinsic rate of increase/decrease of the
				 considered population of species (Malthusian parameter). -->
			<malthus>0.002</malthus>
			<!-- Initial population number for considered species. -->
			<population>0.</population>
			<!-- Species maximum production rate for considered species [m/y]. -->
			<production>0.008</production>
		</species>

		<!-- Species definition -->
		<!-- Deep assemblage (20-30 m), of domal/branching and encrusting types. Represents reef-drowning events -->
		<species>
			<!-- Species name needs to be lower than 10 characters -->
			<name>3b-dp-d</name>
			<!-- Definition of intrinsic rate of increase/decrease of the
				 considered population of species (Malthusian parameter). -->
			<malthus>0.002</malthus>
			<!-- Initial population number for considered species. -->
			<population>0.</population>
			<!-- Species maximum production rate for considered species [m/y]. -->
			<production>0.003</production>
		</species>
        <!-- Community matrix representing the interactions between species.
           αij is the interaction coefficient among the species association i and j ,
           (a particular case is αii, the interaction of one species association with itself).

           Example on how to define the following community matrix of αij coefficients
           with i the column and j the row:
                         -0.001   0.001   0.      0.      0.
                         -0.001  -0.001   0.001   0.      0.
                          0.0034 -0.001  -0.001  -0.02    0.004
                          0.      0.      0.001  -0.001  -0.001
                          0.      0.      0.      0.001  -0.001
        -->
        <communityMatrix>
          <!-- Interaction for species 1 -->
          <value col="0" row="0">-0.0008</value>
          <value col="1" row="0">-0.0008</value>
          <value col="2" row="0">-1.e-15</value>

          <!-- Interaction for species 2 -->
          <value col="0" row="1">-0.0008</value>
          <value col="1" row="1">-0.0008</value>
          <value col="2" row="1">-0.0008</value>

          <!-- Interaction for species 3 -->
          <value col="0" row="2">-1.e-15</value>
          <value col="1" row="2">-0.0008</value>
          <value col="2" row="2">-0.0008</value>
        </communityMatrix>

	</habitats>

	<!-- Sea-level structure
		The following methods can be used:
			- a constant sea-level position for the entire simulation [m]
			- a sea-level fluctuations curve (defined in a file)
	-->
	<sea>
		<!-- Constant sea-level value [m] -->
		<!--val>0.</val-->
		<!-- Sea-level curve - (optional). The file is made of 2 columns:
			- first column: the time in year (increasing order)
			- second column: the sea-level position for the considered time [m]
			 For any given time in the simulation the sea-level is obtained by linear interpolation
		-->
		<curve>data/slossetal_8900_100i_input.csv</curve>
	</sea>

	<!-- Ocean flow structure
		The following methods can be used:
			- a constant flow velocity for the entire simulation [m/d]
			- a flow velocity fluctuations curve (defined in a file)
			- a flow velocity function dependent of water depth
	-->
    
	<flow>
		<!-- Constant velocity value [m/d] -->
		<!--val>0.</val-->
		<!-- Flow velocity curve - (optional). The file is made of 2 columns:
			- first column: the time in year (increasing order)
			- second column: the flow velocity for the considered time [m/d]
			 For any given time in the simulation the flow velocity is obtained by linear interpolation
		-->
		<!--curve>data/flow.csv</curve-->
		<!-- Flow velocity function - (optional).
			 For any given time in the simulation the flow velocity is obtained from water depth evaluation
			 using either :
			 		- a linear function (y=ax+b) or
					- an exponential decay function based on 3 points fitting.
			 The points need to be specify below:
		-->
		<function>
			<?ignore
			<!--linear>
				<a>-0.33</a>
				<b>20</b>
			</linear-->
			?>
			<expdecay>
				<!-- X coordinates (velocity) m/d -->
				<fdvalue col="0" row="0">0.</fdvalue>
				<fdvalue col="1" row="0">30.</fdvalue>
				<fdvalue col="2" row="0">60.</fdvalue>
				<!-- Y coordinates (depth) m -->
				<fdvalue col="0" row="1">22.</fdvalue>
				<fdvalue col="1" row="1">5.</fdvalue>
				<fdvalue col="2" row="1">0.</fdvalue>
			</expdecay>
		</function>
	</flow>

	<!-- Siliciclastic input structure
		The following methods can be used:
			- a constant sediment influx for the entire simulation [m/y]
			- a sediment influx fluctuations curve (defined in a file)
			- a sediment influx function dependent of water depth
	-->
	<sedinput>
		<!-- Constant velocity value [m/d] -->
		<!--val>1.3972603e-7</val-->
		<!-- Flow velocity curve - (optional). The file is made of 2 columns:
			- first column: the time in year (increasing order)
			- second column: the flow velocity for the considered time [m/d]
			 For any given time in the simulation the flow velocity is obtained by linear interpolation
		-->
		<curve>data/sedinput.csv</curve>
		<!-- Sediment input function - (optional).
			 For any given time in the simulation the sediment input is obtained from water depth evaluation
			 using either :
			 		- a linear function (y=ax+b) or
					- an exponential decay function based on 3 points fitting.
			 The points need to be specify below:
		-->
		<?ignore
		<function>
			<linear>
				<a>-6.e6</a>
				<b>20.</b>
			</linear>
			<expdecay>
				<!-- X coordinates (sediment input) m/d -->
				<sdvalue col="0" row="0">1.e-5</sdvalue>
				<sdvalue col="1" row="0">5.e-5</sdvalue>
				<sdvalue col="2" row="0">1.e-4</sdvalue>
				<!-- Y coordinates (depth) m -->
				<sdvalue col="0" row="1">30.</sdvalue>
				<sdvalue col="1" row="1">5.</sdvalue>
				<sdvalue col="2" row="1">0.</sdvalue>
			</expdecay>
		</function>
		?>    
	</sedinput>
    

  <!-- Combining environmental parameters and carbonate production structure.
    The influence functions for each environmental factor (water depth, flow velocity, and sediment input)
    are used to model the interaction between species and their environment. For the sake of simplicity,
    these functions have a trapezoidal shape that the user can define through four points [A,B,C,D].
    A is the minimal value below which the species cannot live. Points B and C define the range where
    the species has the best conditions for development. D is the value over which the species cannot live.
    The function is linearly interpolated between these points.
    This is optional.
  -->
<envishape>

    <!-- Definition of water depth shape function influencing each species [m].
                      Min.[A]    Opt.1 [B]    Opt.2 [C]    Max. [D]
            Species1    0.          1.          6.          8.
            Species2    1.         6.          20.         30.
            Species3    10.         20.          30.         60.
    -->
    
    <!-- ========================EXAMPLE======================== -->
    <!-- Definition of water depth shape function influencing each species [m].
                      Min.[A]    Opt.1 [B]    Opt.2 [C]    Max. [D]
            Species1    1.          2.          20.          50.
            Species2    1.         10.          40.         165.
            Species3    5.         50.          70.         150.
            Species4    1.         50.         160.         200.
            Species5    0.         2.           50.         200.
    -->
    
    <depthshape>
      <!-- Definition of point A, B, C and D for first species -->
      <dvalue col="0" row="0">0.</dvalue>
      <dvalue col="1" row="0">1.</dvalue>
      <dvalue col="2" row="0">6.</dvalue>
      <dvalue col="3" row="0">12.</dvalue>
      <!-- Definition of point A, B, C and D for second species -->
      <dvalue col="0" row="1">1.</dvalue>
      <dvalue col="1" row="1">6.</dvalue>
      <dvalue col="2" row="1">20.</dvalue>
      <dvalue col="3" row="1">22.</dvalue>
      <!-- Definition of point A, B, C and D for third species -->
      <dvalue col="0" row="2">17.</dvalue>
      <dvalue col="1" row="2">20.</dvalue>
      <dvalue col="2" row="2">30.</dvalue>
      <dvalue col="3" row="2">60.</dvalue>
      
    </depthshape>

    <!-- Definition of flow velocity shape function influencing each species [m/d].
                      Min.[A]    Opt.1 [B]    Opt.2 [C]    Max. [D]
            Species1    1.          1.          39.          40.
            Species2    0.          0.          39.          40.
            Species3    1.5         1.5         25.          40.
            Species4    0.          0.           2.           3.
            Species5    0.          2.           3.           5.
    -->
    <flowshape>
      <!-- Definition of point A, B, C and D for first species -->
      <fvalue col="0" row="0">0.</fvalue>
      <fvalue col="1" row="0">0.</fvalue>
      <fvalue col="2" row="0">39.</fvalue>
      <fvalue col="3" row="0">40.</fvalue>
      <!-- Definition of point A, B, C and D for second species -->
      <fvalue col="0" row="1">0.</fvalue>
      <fvalue col="1" row="1">0.</fvalue>
      <fvalue col="2" row="1">19.</fvalue>
      <fvalue col="3" row="1">40.</fvalue>
      <!-- Definition of point A, B, C and D for third species -->
      <fvalue col="0" row="2">1.5</fvalue>
      <fvalue col="1" row="2">1.5</fvalue>
      <fvalue col="2" row="2">25.</fvalue>
      <fvalue col="3" row="2">40.</fvalue>
    </flowshape>

    <!-- Definition of sedimentation shape function influencing each species [m/d].
                      Min.[A]    Opt.1 [B]    Opt.2 [C]    Max. [D]
            Species1    0.001       0.0015       0.003       0.004
            Species2    0.003       0.004        0.005       0.006
            Species3    0.0008      0.001        0.0015      0.002
            Species4    0.002       0.004        0.005       0.0055
            Species5    0.001       0.005        0.008       0.01
    -->
    <sedshape>
      <!-- Definition of point A, B, C and D for first species -->
      <svalue col="0" row="0">0.</svalue>
      <svalue col="1" row="0">0.</svalue>
      <svalue col="2" row="0">0.00005</svalue>
      <svalue col="3" row="0">0.00008</svalue>
      <!-- Definition of point A, B, C and D for second species -->
      <svalue col="0" row="1">0.</svalue>
      <svalue col="1" row="1">0.</svalue>
      <svalue col="2" row="1">0.00005</svalue>
      <svalue col="3" row="1">0.00008</svalue>
      <!-- Definition of point A, B, C and D for third species -->
      <svalue col="0" row="2">0.</svalue>
      <svalue col="1" row="2">0.</svalue>
      <svalue col="2" row="2">0.000015</svalue>
      <svalue col="3" row="2">0.00002</svalue>
    </sedshape>
  </envishape>

</pyreefcore>
